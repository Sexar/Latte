var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};var latte;
(function(latte){var personBase=function(_super){__extends(personBase,_super);function personBase(){_super.apply(this,arguments);this._recordType="Person";this._moduleName="app.contacts";this._idperson=null;this._idcategory=null;this._title=null;this._name=null;this._lastname=null;this._birth=null;this._sex=null;this._address=null;this._phone=null;this._mobile=null;this._note=null;this._company=null;this._email=null}Object.defineProperty(personBase.prototype,"idperson",{get:function(){return this._idperson},
set:function(value){var changed=value!==this._idperson;this._idperson=value;if(changed)this.onIdpersonChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"idpersonChanged",{get:function(){if(!this._idpersonChanged)this._idpersonChanged=new latte.LatteEvent(this);return this._idpersonChanged},enumerable:true,configurable:true});personBase.prototype.onIdpersonChanged=function(){if(this._idpersonChanged)this._idpersonChanged.raise();this.onFieldValueChanged("idperson",
this.idperson)};personBase.prototype.onGetRecordIdName=function(){return"idperson"};Object.defineProperty(personBase.prototype,"idcategory",{get:function(){return this._idcategory},set:function(value){var changed=value!==this._idcategory;this._idcategory=value;if(changed)this.onIdcategoryChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"idcategoryChanged",{get:function(){if(!this._idcategoryChanged)this._idcategoryChanged=new latte.LatteEvent(this);return this._idcategoryChanged},
enumerable:true,configurable:true});personBase.prototype.onIdcategoryChanged=function(){if(this._idcategoryChanged)this._idcategoryChanged.raise();this.onFieldValueChanged("idcategory",this.idcategory)};Object.defineProperty(personBase.prototype,"title",{get:function(){return this._title},set:function(value){var changed=value!==this._title;this._title=value;if(changed)this.onTitleChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"titleChanged",{get:function(){if(!this._titleChanged)this._titleChanged=
new latte.LatteEvent(this);return this._titleChanged},enumerable:true,configurable:true});personBase.prototype.onTitleChanged=function(){if(this._titleChanged)this._titleChanged.raise();this.onFieldValueChanged("title",this.title)};Object.defineProperty(personBase.prototype,"name",{get:function(){return this._name},set:function(value){var changed=value!==this._name;this._name=value;if(changed)this.onNameChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"nameChanged",
{get:function(){if(!this._nameChanged)this._nameChanged=new latte.LatteEvent(this);return this._nameChanged},enumerable:true,configurable:true});personBase.prototype.onNameChanged=function(){if(this._nameChanged)this._nameChanged.raise();this.onFieldValueChanged("name",this.name)};Object.defineProperty(personBase.prototype,"lastname",{get:function(){return this._lastname},set:function(value){var changed=value!==this._lastname;this._lastname=value;if(changed)this.onLastnameChanged()},enumerable:true,
configurable:true});Object.defineProperty(personBase.prototype,"lastnameChanged",{get:function(){if(!this._lastnameChanged)this._lastnameChanged=new latte.LatteEvent(this);return this._lastnameChanged},enumerable:true,configurable:true});personBase.prototype.onLastnameChanged=function(){if(this._lastnameChanged)this._lastnameChanged.raise();this.onFieldValueChanged("lastname",this.lastname)};Object.defineProperty(personBase.prototype,"birth",{get:function(){return this._birth},set:function(value){var changed=
value!==this._birth;this._birth=value;if(changed)this.onBirthChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"birthChanged",{get:function(){if(!this._birthChanged)this._birthChanged=new latte.LatteEvent(this);return this._birthChanged},enumerable:true,configurable:true});personBase.prototype.onBirthChanged=function(){if(this._birthChanged)this._birthChanged.raise();this.onFieldValueChanged("birth",this.birth)};Object.defineProperty(personBase.prototype,"sex",
{get:function(){return this._sex},set:function(value){var changed=value!==this._sex;this._sex=value;if(changed)this.onSexChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"sexChanged",{get:function(){if(!this._sexChanged)this._sexChanged=new latte.LatteEvent(this);return this._sexChanged},enumerable:true,configurable:true});personBase.prototype.onSexChanged=function(){if(this._sexChanged)this._sexChanged.raise();this.onFieldValueChanged("sex",this.sex)};Object.defineProperty(personBase.prototype,
"address",{get:function(){return this._address},set:function(value){var changed=value!==this._address;this._address=value;if(changed)this.onAddressChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"addressChanged",{get:function(){if(!this._addressChanged)this._addressChanged=new latte.LatteEvent(this);return this._addressChanged},enumerable:true,configurable:true});personBase.prototype.onAddressChanged=function(){if(this._addressChanged)this._addressChanged.raise();
this.onFieldValueChanged("address",this.address)};Object.defineProperty(personBase.prototype,"phone",{get:function(){return this._phone},set:function(value){var changed=value!==this._phone;this._phone=value;if(changed)this.onPhoneChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"phoneChanged",{get:function(){if(!this._phoneChanged)this._phoneChanged=new latte.LatteEvent(this);return this._phoneChanged},enumerable:true,configurable:true});personBase.prototype.onPhoneChanged=
function(){if(this._phoneChanged)this._phoneChanged.raise();this.onFieldValueChanged("phone",this.phone)};Object.defineProperty(personBase.prototype,"mobile",{get:function(){return this._mobile},set:function(value){var changed=value!==this._mobile;this._mobile=value;if(changed)this.onMobileChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"mobileChanged",{get:function(){if(!this._mobileChanged)this._mobileChanged=new latte.LatteEvent(this);return this._mobileChanged},
enumerable:true,configurable:true});personBase.prototype.onMobileChanged=function(){if(this._mobileChanged)this._mobileChanged.raise();this.onFieldValueChanged("mobile",this.mobile)};Object.defineProperty(personBase.prototype,"note",{get:function(){return this._note},set:function(value){var changed=value!==this._note;this._note=value;if(changed)this.onNoteChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"noteChanged",{get:function(){if(!this._noteChanged)this._noteChanged=
new latte.LatteEvent(this);return this._noteChanged},enumerable:true,configurable:true});personBase.prototype.onNoteChanged=function(){if(this._noteChanged)this._noteChanged.raise();this.onFieldValueChanged("note",this.note)};Object.defineProperty(personBase.prototype,"company",{get:function(){return this._company},set:function(value){var changed=value!==this._company;this._company=value;if(changed)this.onCompanyChanged()},enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,
"companyChanged",{get:function(){if(!this._companyChanged)this._companyChanged=new latte.LatteEvent(this);return this._companyChanged},enumerable:true,configurable:true});personBase.prototype.onCompanyChanged=function(){if(this._companyChanged)this._companyChanged.raise();this.onFieldValueChanged("company",this.company)};Object.defineProperty(personBase.prototype,"email",{get:function(){return this._email},set:function(value){var changed=value!==this._email;this._email=value;if(changed)this.onEmailChanged()},
enumerable:true,configurable:true});Object.defineProperty(personBase.prototype,"emailChanged",{get:function(){if(!this._emailChanged)this._emailChanged=new latte.LatteEvent(this);return this._emailChanged},enumerable:true,configurable:true});personBase.prototype.onEmailChanged=function(){if(this._emailChanged)this._emailChanged.raise();this.onFieldValueChanged("email",this.email)};personBase.prototype.onGetFields=function(){return{"idperson":this.idperson,"idcategory":this.idcategory,"title":this.title,
"name":this.name,"lastname":this.lastname,"birth":this.birth,"sex":this.sex,"address":this.address,"phone":this.phone,"mobile":this.mobile,"note":this.note,"company":this.company,"email":this.email}};personBase.search=function(options,page,pageSize){if(page===void 0)page=1;if(pageSize===void 0)pageSize=50;return new latte.RemoteCall("app.contacts","Person","search",{options:options,page:page,pageSize:pageSize})};return personBase}(latte.DataRecord);latte.personBase=personBase;var categoryBase=function(_super){__extends(categoryBase,
_super);function categoryBase(){_super.apply(this,arguments);this._recordType="Category";this._moduleName="app.contacts";this._idcategory=null;this._name=null;this._i=null}Object.defineProperty(categoryBase.prototype,"idcategory",{get:function(){return this._idcategory},set:function(value){var changed=value!==this._idcategory;this._idcategory=value;if(changed)this.onIdcategoryChanged()},enumerable:true,configurable:true});Object.defineProperty(categoryBase.prototype,"idcategoryChanged",{get:function(){if(!this._idcategoryChanged)this._idcategoryChanged=
new latte.LatteEvent(this);return this._idcategoryChanged},enumerable:true,configurable:true});categoryBase.prototype.onIdcategoryChanged=function(){if(this._idcategoryChanged)this._idcategoryChanged.raise();this.onFieldValueChanged("idcategory",this.idcategory)};categoryBase.prototype.onGetRecordIdName=function(){return"idcategory"};Object.defineProperty(categoryBase.prototype,"name",{get:function(){return this._name},set:function(value){var changed=value!==this._name;this._name=value;if(changed)this.onNameChanged()},
enumerable:true,configurable:true});Object.defineProperty(categoryBase.prototype,"nameChanged",{get:function(){if(!this._nameChanged)this._nameChanged=new latte.LatteEvent(this);return this._nameChanged},enumerable:true,configurable:true});categoryBase.prototype.onNameChanged=function(){if(this._nameChanged)this._nameChanged.raise();this.onFieldValueChanged("name",this.name)};Object.defineProperty(categoryBase.prototype,"i",{get:function(){return this._i},set:function(value){var changed=value!==this._i;
this._i=value;if(changed)this.onIChanged()},enumerable:true,configurable:true});Object.defineProperty(categoryBase.prototype,"iChanged",{get:function(){if(!this._iChanged)this._iChanged=new latte.LatteEvent(this);return this._iChanged},enumerable:true,configurable:true});categoryBase.prototype.onIChanged=function(){if(this._iChanged)this._iChanged.raise();this.onFieldValueChanged("i",this.i)};categoryBase.prototype.onGetFields=function(){return{"idcategory":this.idcategory,"name":this.name,"i":this.i}};
categoryBase.fullCatalog=function(){return new latte.RemoteCall("app.contacts","Category","fullCatalog",{})};return categoryBase}(latte.DataRecord);latte.categoryBase=categoryBase})(latte||(latte={}));var latte;
(function(latte){var ContactsMainViewBase=function(_super){__extends(ContactsMainViewBase,_super);function ContactsMainViewBase(){_super.call(this,latte.Element.fromBank("ContactsMainViewBase"));this.bind(this,true)}Object.defineProperty(ContactsMainViewBase.prototype,"allContactsItem",{get:function(){if(!this._allContactsItem)this._allContactsItem=new latte.Element(this.querySelector("[data-property=allContactsItem]"));return this._allContactsItem},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,
"btnAdd",{get:function(){if(!this._btnAdd)this._btnAdd=new latte.Element(this.querySelector("[data-property=btnAdd]"));return this._btnAdd},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"btnEdit",{get:function(){if(!this._btnEdit)this._btnEdit=new latte.Element(this.querySelector("[data-property=btnEdit]"));return this._btnEdit},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"detailToolbar",{get:function(){if(!this._detailToolbar)this._detailToolbar=
new latte.Element(this.querySelector("[data-property=detailToolbar]"));return this._detailToolbar},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"listGroups",{get:function(){if(!this._listGroups)this._listGroups=new latte.Element(this.querySelector("[data-property=listGroups]"));return this._listGroups},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"listPeople",{get:function(){if(!this._listPeople)this._listPeople=
new latte.Element(this.querySelector("[data-property=listPeople]"));return this._listPeople},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"myContacts",{get:function(){if(!this._myContacts)this._myContacts=new latte.Element(this.querySelector("[data-property=myContacts]"));return this._myContacts},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"panelDetail",{get:function(){if(!this._panelDetail)this._panelDetail=
new latte.Element(this.querySelector("[data-property=panelDetail]"));return this._panelDetail},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"personWrapper",{get:function(){if(!this._personWrapper)this._personWrapper=new latte.Element(this.querySelector("[data-property=personWrapper]"));return this._personWrapper},enumerable:true,configurable:true});Object.defineProperty(ContactsMainViewBase.prototype,"txtSearch",{get:function(){if(!this._txtSearch)this._txtSearch=
new latte.Textbox(this.querySelector("[data-property=txtSearch]"));return this._txtSearch},enumerable:true,configurable:true});ContactsMainViewBase.getModel=function(){if(!this._Model)this._Model=new latte.Element(latte.Element.fromBank("ContactsMainViewBase"));return this._Model};return ContactsMainViewBase}(latte.Element);latte.ContactsMainViewBase=ContactsMainViewBase})(latte||(latte={}));var latte;
(function(latte){var CategoryListItem=function(_super){__extends(CategoryListItem,_super);function CategoryListItem(){_super.call(this,latte.Element.fromBank("CategoryListItem"));this.bind(this,true)}CategoryListItem.getModel=function(){if(!this._Model)this._Model=new latte.Element(latte.Element.fromBank("CategoryListItem"));return this._Model};return CategoryListItem}(latte.Element);latte.CategoryListItem=CategoryListItem})(latte||(latte={}));var latte;
(function(latte){var ListItemHeaderBase=function(_super){__extends(ListItemHeaderBase,_super);function ListItemHeaderBase(){_super.call(this,latte.Element.fromBank("ListItemHeaderBase"));this.bind(this,true)}ListItemHeaderBase.getModel=function(){if(!this._Model)this._Model=new latte.Element(latte.Element.fromBank("ListItemHeaderBase"));return this._Model};return ListItemHeaderBase}(latte.Element);latte.ListItemHeaderBase=ListItemHeaderBase})(latte||(latte={}));var latte;
(function(latte){var PersonListItem=function(_super){__extends(PersonListItem,_super);function PersonListItem(){_super.call(this,latte.Element.fromBank("PersonListItem"));this.bind(this,true)}PersonListItem.getModel=function(){if(!this._Model)this._Model=new latte.Element(latte.Element.fromBank("PersonListItem"));return this._Model};return PersonListItem}(latte.Element);latte.PersonListItem=PersonListItem})(latte||(latte={}));var latte;
(function(latte){var PersonViewBase=function(_super){__extends(PersonViewBase,_super);function PersonViewBase(){_super.call(this,latte.Element.fromBank("PersonViewBase"));this.bind(this,true)}Object.defineProperty(PersonViewBase.prototype,"detailHeader",{get:function(){if(!this._detailHeader)this._detailHeader=new latte.Element(this.querySelector("[data-property=detailHeader]"));return this._detailHeader},enumerable:true,configurable:true});Object.defineProperty(PersonViewBase.prototype,"detailRows",
{get:function(){if(!this._detailRows)this._detailRows=new latte.Element(this.querySelector("[data-property=detailRows]"));return this._detailRows},enumerable:true,configurable:true});Object.defineProperty(PersonViewBase.prototype,"lblDescription",{get:function(){if(!this._lblDescription)this._lblDescription=new latte.Element(this.querySelector("[data-property=lblDescription]"));return this._lblDescription},enumerable:true,configurable:true});Object.defineProperty(PersonViewBase.prototype,"lblFirstName",
{get:function(){if(!this._lblFirstName)this._lblFirstName=new latte.Element(this.querySelector("[data-property=lblFirstName]"));return this._lblFirstName},enumerable:true,configurable:true});Object.defineProperty(PersonViewBase.prototype,"lblInitials",{get:function(){if(!this._lblInitials)this._lblInitials=new latte.Element(this.querySelector("[data-property=lblInitials]"));return this._lblInitials},enumerable:true,configurable:true});Object.defineProperty(PersonViewBase.prototype,"lblLastName",{get:function(){if(!this._lblLastName)this._lblLastName=
new latte.Element(this.querySelector("[data-property=lblLastName]"));return this._lblLastName},enumerable:true,configurable:true});PersonViewBase.getModel=function(){if(!this._Model)this._Model=new latte.Element(latte.Element.fromBank("PersonViewBase"));return this._Model};return PersonViewBase}(latte.Element);latte.PersonViewBase=PersonViewBase})(latte||(latte={}));var latte;
(function(latte){window["latte"]["globalViewsBank"]=latte._merge(window["latte"]["globalViewsBank"]||{},{"ContactsMainViewBase":'<div data-class="ContactsMainViewBase" class="contacts-ui">\n\n    \x3c!-- GROUPS PANEL --\x3e\n    <div data-property="listGroups" class="panel-groups">\n        <div class="list-item" data-property="allContactsItem" data-event="click:loadAllContacts">All Contacts</div>\n        <div class="list-item-header">My Contacts</div>\n        <div data-property="myContacts">\n            \n            <div class="list-item">Family</div>\n            <div class="list-item">Other</div>\n        </div>\n    </div>\n\n    \x3c!-- NAMES LIST PANEL --\x3e\n    <div class="panel-list">\n        <div class="search-box">\n            <input data-property="txtSearch" data-event="input:loadContacts" type="text" placeholder="Search">\n        </div>\n\n        <div data-property="listPeople" class="list">\n            <div class="no-items">No contacts found</div>\n            \n            \n            <div class="list-item selected">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item">Alchemist Joe</div>\n            <div class="list-item-header">B</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item">Bradbury Jack</div>\n            <div class="list-item-header">D</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n            <div class="list-item">Doe John</div>\n        </div>\n    </div>\n\n    \x3c!-- CONTACT DETAIL PANEL --\x3e\n    <div data-property="panelDetail" class="panel-detail">\n        <div data-property="personWrapper">\n            \n        </div>\n        <div data-property="detailToolbar" class="toolbar">\n            <div data-property="btnAdd" data-event="click: btnAdd_Click" class="button btn-add">+</div>\n            <div class="button btn-export">...</div>\n            <div data-property="btnEdit" data-event="click: btnEdit_Click" class="button btn-edit">Edit</div>\n        </div>\n    </div>\n</div>',"CategoryListItem":'<div class="list-item" data-class="CategoryListItem"><span data-bind="name">Friends</span></div>',
"ListItemHeaderBase":'<div class="list-item-header" data-class="ListItemHeaderBase">A</div>',"PersonListItem":'<div class="list-item" data-class="PersonListItem"><span data-bind="fullName">Alchemist Joe</span></div>',"PersonViewBase":'<div data-class="PersonViewBase">\n                <div data-property="detailHeader" class="header">\n                    <div class="picture-side">\n                        <div class="picture">\n                            <div data-property="lblInitials" data-bind="initials">AJ</div>\n                        </div>\n                    </div>\n                    <div class="name-side">\n                        <div class="name-row">\n                            <div data-property="lblFirstName" data-event="focus: lblFirstName_Focus" data-bind="name" class="name">Alchemist</div>\n                            <div data-property="lblLastName" data-bind="lastname" data-event="focus: lblLastName_Focus" class="last">Joe</div>\n                        </div>\n                        <div data-property="lblDescription" data-bind="company" class="description">Superworks, Inc.</div>\n                    </div>\n                </div>\n                <div data-property="detailRows" class="rows">\n                    <div class="data">\n                        <div class="name">email</div>\n                        <div data-bind="email" class="value">a@a.com</div>\n                    </div>\n                    <div class="data">\n                        <div class="name">phone</div>\n                        <div data-bind="phone" class="value">+(55) 123456789</div>\n                    </div>\n                    <div class="data">\n                        <div class="name">mobile</div>\n                        <div data-bind="mobile" class="value">+(54) 123456789</div>\n                    </div>\n                    <div class="data">\n                        <div class="name">address</div>\n                        <div data-bind="address" class="value">Elm Street 1090, TX, PA 9875</div>\n                    </div>\n                    <div class="data">\n                        <div class="name">note</div>\n                        <div data-bind="note" class="value">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus consequat molestie enim, vel viverra odio malesuada quis. Nulla gravida vulputate nulla, non egestas elit pretium et. </div>\n                    </div>\n                </div>\n            </div>'})})(latte||
(latte={}));var latte;(function(latte){var Main=function(){function Main(){document.body.appendChild((new latte.ContactsMainView).element)}return Main}();latte.Main=Main})(latte||(latte={}));var latte;
(function(latte){var ContactsMainView=function(_super){__extends(ContactsMainView,_super);function ContactsMainView(){_super.call(this);this._personView=null;this._selectedCategory=null;this.loadCategories();this.loadContacts()}ContactsMainView.prototype.selectCategoryItem=function(item){this.listGroups.findAll(".selected").removeClass("selected");item.addClass("selected");this.selectedCategory=item.dataBinds.length>0?item.dataBinds[0].record:null};ContactsMainView.prototype.selectPersonItem=function(item){this.listPeople.findAll(".selected").removeClass("selected");
item.addClass("selected");this.personView=new latte.PersonView(item.dataBinds[0].record)};ContactsMainView.prototype.btnAdd_Click=function(){if(this.personView.editMode)this.personView.editMode=false;this.personView.person=new latte.Person;this.personView.person.idcategory=this.selectedCategory instanceof latte.Category?this.selectedCategory.idcategory:0;this.personView.editMode=true};ContactsMainView.prototype.btnEdit_Click=function(){this.personView.editMode=!this.personView.editMode};ContactsMainView.prototype.loadCategories=
function(){var _this=this;this.myContacts.clear();latte.Category.fullCatalog().send(function(cats){var items=_this.myContacts.addCollection(latte.ElementCollection.fromBindArray(cats,latte.CategoryListItem));items.addEventListener("click",function(item){_this.selectCategoryItem(item)})})};ContactsMainView.prototype.loadAllContacts=function(){this.selectCategoryItem(this.allContactsItem)};ContactsMainView.prototype.loadContacts=function(){var _this=this;this.listPeople.clear();var opts={};if(this.selectedCategory instanceof
latte.Category)opts.idcategory=this.selectedCategory.idcategory;if(this.txtSearch.value.length>0)opts.text=this.txtSearch.value;latte.Person.search(opts,1,50).send(function(p){var groups={};for(var i=0;i<p.records.length;i++)(function(person){if(latte._undef(groups[person.charForIndex]))groups[person.charForIndex]=[];groups[person.charForIndex].push(person)})(p.records[i]);if(p.records.length==0){var noItems=new latte.Element(document.createElement("div"));noItems.addClass("no-items");noItems.text=
strings.noContacts;_this.listPeople.add(noItems)}for(var g in groups){var groupItem=_this.listPeople.add(new latte.ListItemHeader);groupItem.text=g;var items=_this.listPeople.addCollection(latte.ElementCollection.fromBindArray(groups[g],latte.PersonListItem));items.addEventListener("click",function(item){_this.selectPersonItem(item)})}})};ContactsMainView.prototype.onPersonViewChanged=function(){var _this=this;if(this._personViewChanged)this._personViewChanged.raise();this.personWrapper.setContent(this.personView);
this.personView.editModeChanged.add(function(){if(_this.personView.editMode)_this.btnEdit.addClass("checked");else _this.btnEdit.removeClass("checked")})};ContactsMainView.prototype.onSelectedCategoryChanged=function(){if(this._selectedCategoryChanged)this._selectedCategoryChanged.raise();this.loadContacts()};Object.defineProperty(ContactsMainView.prototype,"personViewChanged",{get:function(){if(!this._personViewChanged)this._personViewChanged=new latte.LatteEvent(this);return this._personViewChanged},
enumerable:true,configurable:true});Object.defineProperty(ContactsMainView.prototype,"searchTextChanged",{get:function(){if(!this._searchTextChanged)this._searchTextChanged=new latte.LatteEvent(this);return this._searchTextChanged},enumerable:true,configurable:true});Object.defineProperty(ContactsMainView.prototype,"selectedCategoryChanged",{get:function(){if(!this._selectedCategoryChanged)this._selectedCategoryChanged=new latte.LatteEvent(this);return this._selectedCategoryChanged},enumerable:true,
configurable:true});Object.defineProperty(ContactsMainView.prototype,"personView",{get:function(){return this._personView},set:function(value){var changed=value!==this._personView;this._personView=value;if(changed)this.onPersonViewChanged()},enumerable:true,configurable:true});Object.defineProperty(ContactsMainView.prototype,"selectedCategory",{get:function(){return this._selectedCategory},set:function(value){var changed=value!==this._selectedCategory;this._selectedCategory=value;if(changed)this.onSelectedCategoryChanged()},
enumerable:true,configurable:true});return ContactsMainView}(latte.ContactsMainViewBase);latte.ContactsMainView=ContactsMainView})(latte||(latte={}));var latte;(function(latte){var ListItemHeader=function(_super){__extends(ListItemHeader,_super);function ListItemHeader(text){if(text===void 0)text=null;_super.call(this);if(text)this.text=text}return ListItemHeader}(latte.ListItemHeaderBase);latte.ListItemHeader=ListItemHeader})(latte||(latte={}));var latte;
(function(latte){var PersonView=function(_super){__extends(PersonView,_super);function PersonView(person){_super.call(this);this._editMode=null;this._person=null;if(person)this.person=person}PersonView.prototype.lblFirstName_Focus=function(){setTimeout(function(){document.execCommand("selectAll",false,null)},50)};PersonView.prototype.lblLastName_Focus=function(){setTimeout(function(){document.execCommand("selectAll",false,null)},50)};PersonView.prototype.onEditModeChanged=function(){if(this._editModeChanged)this._editModeChanged.raise();
this.findAll("[data-bind]").setProperty("contentEditable",this.editMode);if(this.editMode)this.lblFirstName.element.focus();else this.person.save(function(){})};PersonView.prototype.onPersonChanged=function(){if(this._personChanged)this._personChanged.raise();if(this.person)this.bind(this.person)};Object.defineProperty(PersonView.prototype,"editModeChanged",{get:function(){if(!this._editModeChanged)this._editModeChanged=new latte.LatteEvent(this);return this._editModeChanged},enumerable:true,configurable:true});
Object.defineProperty(PersonView.prototype,"personChanged",{get:function(){if(!this._personChanged)this._personChanged=new latte.LatteEvent(this);return this._personChanged},enumerable:true,configurable:true});Object.defineProperty(PersonView.prototype,"editMode",{get:function(){return this._editMode},set:function(value){var changed=value!==this._editMode;this._editMode=value;if(changed)this.onEditModeChanged()},enumerable:true,configurable:true});Object.defineProperty(PersonView.prototype,"person",
{get:function(){return this._person},set:function(value){var changed=value!==this._person;this._person=value;if(changed)this.onPersonChanged()},enumerable:true,configurable:true});return PersonView}(latte.PersonViewBase);latte.PersonView=PersonView})(latte||(latte={}));var latte;
(function(latte){var Person=function(_super){__extends(Person,_super);function Person(){_super.call(this)}Person.prototype.onFieldValueChanged=function(name,value){_super.prototype.onFieldValueChanged.call(this,name,value);if(name=="name"||name=="lastname"){this.onFullNameChanged();this.onInitialsChanged()}};Person.prototype.onInitialsChanged=function(){if(this._initialsChanged)this._initialsChanged.raise()};Person.prototype.onFullNameChanged=function(){if(this._fullNameChanged)this._fullNameChanged.raise()};
Object.defineProperty(Person.prototype,"fullNameChanged",{get:function(){if(!this._fullNameChanged)this._fullNameChanged=new latte.LatteEvent(this);return this._fullNameChanged},enumerable:true,configurable:true});Object.defineProperty(Person.prototype,"initialsChanged",{get:function(){if(!this._initialsChanged)this._initialsChanged=new latte.LatteEvent(this);return this._initialsChanged},enumerable:true,configurable:true});Object.defineProperty(Person.prototype,"charForIndex",{get:function(){var f=
String(this.name);var l=String(this.lastname);if(l.length>0)return l.charAt(0).toUpperCase();else if(f.length>0)return l.charAt(0).toUpperCase();else return strings.noName},enumerable:true,configurable:true});Object.defineProperty(Person.prototype,"fullName",{get:function(){return[this.name,this.lastname].join(" ")},enumerable:true,configurable:true});Object.defineProperty(Person.prototype,"initials",{get:function(){var f=String(this.name||"");var l=String(this.lastname||"");var data=[];if(f.length)data.push(f.charAt(0).toUpperCase());
if(l.length)data.push(l.charAt(0).toUpperCase());return data.join("")},enumerable:true,configurable:true});return Person}(latte.personBase);latte.Person=Person})(latte||(latte={}));var latte;(function(latte){var Category=function(_super){__extends(Category,_super);function Category(){_super.call(this)}return Category}(latte.categoryBase);latte.Category=Category})(latte||(latte={}));